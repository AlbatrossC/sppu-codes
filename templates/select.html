<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>SPPU Question Papers</title>
    <meta name="keywords" content="SPPU, question papers, previous year papers, engineering branches, Pune University" />
    <meta name="description" content="SPPU Question Papers - View categorized SPPU Previous Year Exam Papers by branch and semester." />
    <link rel="canonical" href="https://sppucodes.vercel.app/question-papers" />
    <link rel="icon" href="/images/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="/static/css/select.css?v=1.1">
    <meta name="google-adsense-account" content="ca-pub-6918638598461716">
    <script src="{{ url_for('static', filename='js/analytics.js') }}?v=3.0" defer></script>
</head>
<body>
    <!-- HEADER -->
    <header>
        <div class="header__container">
            <button onclick="location.href='/'" class="home-button" aria-label="Go to home page">Home</button>
            <h1 onclick="location.href='/question-papers'" class="main-title">SPPU Question Papers</h1>
        </div>
    </header>

    <!-- MAIN CONTENT -->
    <div class="container">
        <div class="breadcrumb-container">
            <div class="breadcrumb" id="breadcrumb">
                <span class="breadcrumb-item active">Branches</span>
            </div>
        </div>

        <div class="navigation">
            <div id="branches" class="nav-level active">
                <h2 class="section-title">Select a Branch</h2>
                <div class="cards-grid">
                    {% for branch in organized_data.keys() %}
                    <div class="card" onclick="showSemesters('{{ branch }}')">
                        <div class="card-title">{{ branch }}</div>
                    </div>
                    {% endfor %}
                </div>
            </div>

            {% for branch, semesters in organized_data.items() %}
            <div id="{{ branch | replace(' ', '_') }}-sems" class="nav-level">
                <h2 class="section-title">{{ branch }} - Select Semester</h2>
                <div class="cards-grid">
                    {% for sem in semesters.keys() %}
                    <div class="card" onclick="showSubjects('{{ branch }}', '{{ sem }}')">
                        <div class="card-title">{{ sem }}</div>
                    </div>
                    {% endfor %}
                </div>
            </div>

            {% for sem, subjects in semesters.items() %}
            <div id="{{ branch | replace(' ', '_') }}-{{ sem | replace(' ', '_') }}-subjects" class="nav-level">
                <h2 class="section-title">{{ branch }} - {{ sem }}</h2>
                <div class="cards-grid">
                    {% for subject in subjects %}
                    <div class="card subject-card">
                        <div class="subject-info">
                            <h3>{{ subject.subject_name }}</h3>
                        </div>
                        <a href="/question-papers/{{ subject.subject_link }}" class="view-button">View Question Papers</a>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endfor %}
            {% endfor %}
        </div>
    </div>

    <script>
        const breadcrumb = document.getElementById('breadcrumb');

        function clearActive() {
            document.querySelectorAll('.nav-level').forEach(el => el.classList.remove('active'));
        }

        function updateBreadcrumb(path) {
            breadcrumb.innerHTML = '';
            if (path.length === 0) {
                const span = document.createElement('span');
                span.classList.add('breadcrumb-item', 'active');
                span.textContent = 'Branches';
                breadcrumb.appendChild(span);
                return;
            }
            
            path.forEach((item, index) => {
                const span = document.createElement('span');
                span.classList.add('breadcrumb-item');
                if (index === path.length - 1) {
                    span.classList.add('active');
                } else {
                    span.classList.add('clickable');
                    span.onclick = item.onClick;
                }
                span.textContent = item.name;
                breadcrumb.appendChild(span);
                
                if (index < path.length - 1) {
                    const separator = document.createElement('span');
                    separator.classList.add('breadcrumb-separator');
                    separator.innerHTML = '&rsaquo;';
                    breadcrumb.appendChild(separator);
                }
            });
        }

        function showSemesters(branch) {
            clearActive();
            document.getElementById(`${branch.replaceAll(' ', '_')}-sems`).classList.add('active');
            updateBreadcrumb([
                { name: 'Branches', onClick: () => showBranches() },
                { name: branch }
            ]);
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function showSubjects(branch, sem) {
            clearActive();
            document.getElementById(`${branch.replaceAll(' ', '_')}-${sem.replaceAll(' ', '_')}-subjects`).classList.add('active');
            updateBreadcrumb([
                { name: 'Branches', onClick: () => showBranches() },
                { name: branch, onClick: () => showSemesters(branch) },
                { name: sem }
            ]);
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function showBranches() {
            clearActive();
            document.getElementById('branches').classList.add('active');
            updateBreadcrumb([]);
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Initialize breadcrumb
        document.addEventListener('DOMContentLoaded', () => {
            updateBreadcrumb([]);
        });
    </script>
</body>
</html>